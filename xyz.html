<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üöÑ Railway Maintenance & Intelligence Scheduling System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Leaflet.js for Weather Map -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-openweathermap/leaflet-openweathermap.js"></script>

<!-- Styles -->
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  margin: 0;
  background: linear-gradient(135deg, #e0f7fa, #f9f9f9);
  color: #212529;
  overflow-x: hidden;
}

header {
  background: linear-gradient(90deg, #023047, #219ebc);
  color: white;
  padding: 15px;
  text-align: center;
  font-size: 1.9em;
  font-weight: bold;
  letter-spacing: 1px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  position: sticky;
  top: 0;
  z-index: 10;
}

/* üîπ Responsive Navigation */
nav {
  display: flex;
  justify-content: center;
  background: #8ecae6;
  padding: 10px;
  gap: 25px;
  flex-wrap: wrap;
}

nav a {
  color: #023047;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s;
  padding: 8px 16px;
  border-radius: 8px;
}

nav a:hover {
  background: #219ebc;
  color: white;
}

/* Hamburger icon */
.menu-toggle {
  display: none;
  background: #219ebc;
  border: none;
  color: white;
  font-size: 1.5em;
  padding: 10px;
  cursor: pointer;
  border-radius: 8px;
  position: absolute;
  right: 15px;
  top: 15px;
}

@media (max-width: 768px) {
  nav {
    display: none;
    flex-direction: column;
    align-items: center;
    background: #8ecae6;
  }
  nav.active {
    display: flex;
  }
  .menu-toggle {
    display: block;
  }
}

.dashboard {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 20px;
  padding: 20px;
}

#weatherMap {
  height: 450px;
  border-radius: 12px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.2);
}

.table-section {
  background: white;
  padding: 15px;
  border-radius: 12px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}

.table-section input {
  width: 95%;
  padding: 8px;
  margin-bottom: 10px;
  border-radius: 6px;
  border: 1px solid #aaa;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  border-bottom: 1px solid #ddd;
  padding: 10px;
  text-align: center;
}

th {
  background-color: #219ebc;
  color: white;
}

tr:hover {
  background-color: #e0f7fa;
  transition: 0.3s;
}

#chartSection {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin: 20px;
}

.chart-card {
  background: white;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}

.notifications {
  position: fixed;
  top: 120px;
  right: 20px;
  width: 250px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  padding: 10px;
}

.notification {
  background: #fb8500;
  color: white;
  padding: 10px;
  margin: 5px 0;
  border-radius: 6px;
  animation: blink 2s infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.clock {
  text-align: center;
  margin-top: 10px;
  font-size: 1.1em;
  font-weight: bold;
  color: #023047;
}

.chatbot {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #219ebc;
  color: white;
  border: none;
  border-radius: 50%;
  width: 55px;
  height: 55px;
  font-size: 1.5em;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  transition: transform 0.3s ease;
}

.chatbot:hover {
  transform: scale(1.1);
  background: #023047;
}

.chat-window {
  position: fixed;
  bottom: 90px;
  right: 20px;
  width: 300px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  display: none;
  flex-direction: column;
  overflow: hidden;
}

.chat-header {
  background: #219ebc;
  color: white;
  padding: 10px;
  text-align: center;
}

.chat-body {
  height: 200px;
  overflow-y: auto;
  padding: 10px;
  font-size: 0.9em;
}

.chat-input {
  display: flex;
}

.chat-input input {
  flex: 1;
  padding: 10px;
  border: none;
  border-top: 1px solid #ccc;
}

.chat-input button {
  background: #219ebc;
  color: white;
  border: none;
  padding: 10px 15px;
}

/* üìç Live Train Map Section */
.train-map-section {
  background: white;
  margin: 30px;
  border-radius: 12px;
  box-shadow: 0 3px 12px rgba(0,0,0,0.15);
  padding: 20px;
}

.train-map-section h3 {
  text-align: center;
  color: #023047;
}

iframe {
  border-radius: 12px;
  width: 100%;
  height: 500px;
  border: none;
}
</style>
</head>
<body>

<header>üöÑ Railway Maintenance & Intelligence Scheduling System</header>

<!-- üîπ Hamburger Button for small screens -->
<button class="menu-toggle" id="menuToggle">‚ò∞</button>

<nav id="navbar">
  <a href="#">Home</a>
  <a href="#">Maintenance</a>
  <a href="#">Zones & Divisions</a>
  <a href="#">Notifications</a>
  <a href="#">Reports</a>
</nav>

<div class="clock" id="clock"></div>

<div class="dashboard">
  <!-- Weather Map -->
  <div id="weatherMap"></div>

  <!-- Maintenance Table -->
  <div class="table-section">
    <h3>Maintenance Schedule</h3>
    <input type="text" id="searchBox" placeholder="Search by Zone or Division...">
    <table id="maintenanceTable">
      <tr>
        <th>S/No.</th><th>Zone</th><th>HQ</th><th>Division</th><th>Date</th><th>Status</th>
      </tr>
      <tr><td>1</td><td>Central Railway</td><td>Mumbai</td><td>Mumbai</td><td>2025-10-12</td><td>Pending</td></tr>
      <tr><td>2</td><td>Eastern Railway</td><td>Kolkata</td><td>Sealdah</td><td>2025-10-15</td><td>Scheduled</td></tr>
      <tr><td>3</td><td>Southern Railway</td><td>Chennai</td><td>Madurai</td><td>2025-10-20</td><td>In Progress</td></tr>
      <tr><td>4</td><td>Northern Railway</td><td>New Delhi</td><td>Ambala</td><td>2025-10-25</td><td>Completed</td></tr>
    </table>
  </div>
</div>

<div id="chartSection">
  <div class="chart-card">
    <canvas id="maintenanceChart"></canvas>
  </div>
  <div class="chart-card">
    <canvas id="zoneChart"></canvas>
  </div>
</div>

<!-- üó∫Ô∏è Live Train Map -->
<div class="train-map-section">
  <h3>üöÜ Live Train Movement Map</h3>
  <iframe src="https://railradar.in/live-train-map"></iframe>
</div>

<!-- Notifications -->
<div class="notifications">
  <h4>üîî Notifications</h4>
  <div class="notification">Track repair delay in Chennai Division</div>
  <div class="notification">Weather alert: Heavy rain in Mumbai region</div>
</div>

<!-- Chatbot -->
<button class="chatbot" id="chatBtn">üí¨</button>
<div class="chat-window" id="chatWindow">
  <div class="chat-header">Railway Assistant</div>
  <div class="chat-body" id="chatBody"></div>
  <div class="chat-input">
    <input type="text" id="chatInput" placeholder="Ask me anything...">
    <button id="sendBtn">‚û°Ô∏è</button>
  </div>
</div>

<script>
// ‚è∞ Live Clock
setInterval(() => {
  document.getElementById("clock").innerText = new Date().toLocaleString();
}, 1000);

// üå¶Ô∏è Weather Map Initialization
const map = L.map('weatherMap').setView([22.9734, 78.6569], 5);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
L.OWM.temperature({appId:'YOUR_OPENWEATHERMAP_API_KEY'}).addTo(map);
L.OWM.wind({appId:'YOUR_OPENWEATHERMAP_API_KEY'}).addTo(map);

// üìä Charts
new Chart(document.getElementById('maintenanceChart'), {
  type: 'bar',
  data: {
    labels: ['Pending', 'Scheduled', 'In Progress', 'Completed'],
    datasets: [{
      data: [5, 8, 3, 10],
      backgroundColor: ['#ffb703','#8ecae6','#219ebc','#023047']
    }]
  },
  options: {
    plugins: { title: { display: true, text: 'Maintenance Status Overview' } },
    responsive: true
  }
});

new Chart(document.getElementById('zoneChart'), {
  type: 'pie',
  data: {
    labels: ['Central', 'Eastern', 'Southern', 'Northern'],
    datasets: [{
      data: [7, 5, 6, 9],
      backgroundColor: ['#219ebc','#fb8500','#ffb703','#8ecae6']
    }]
  },
  options: {
    plugins: { title: { display: true, text: 'Zone-Wise Maintenance Count' } }
  }
});

// üîç Search Filter
document.getElementById("searchBox").addEventListener("keyup", function() {
  let filter = this.value.toUpperCase();
  let rows = document.querySelector("#maintenanceTable").rows;
  for (let i = 1; i < rows.length; i++) {
    let txt = rows[i].textContent.toUpperCase();
    rows[i].style.display = txt.includes(filter) ? "" : "none";
  }
});

// ü§ñ Chatbot
const chatBtn = document.getElementById("chatBtn");
const chatWindow = document.getElementById("chatWindow");
const chatBody = document.getElementById("chatBody");
const chatInput = document.getElementById("chatInput");
const sendBtn = document.getElementById("sendBtn");

chatBtn.onclick = () => chatWindow.style.display = chatWindow.style.display === "flex" ? "none" : "flex";

sendBtn.onclick = () => {
  const userMsg = chatInput.value.trim();
  if (!userMsg) return;
  chatBody.innerHTML += `<div><b>You:</b> ${userMsg}</div>`;
  chatInput.value = "";

  let reply = "I'm not sure I understand. Try asking about maintenance, zones, or weather.";
  if (userMsg.toLowerCase().includes("weather")) reply = "You can view live weather patterns on the left map.";
  if (userMsg.toLowerCase().includes("maintenance")) reply = "Maintenance schedules are available in the right-hand table.";
  if (userMsg.toLowerCase().includes("zone")) reply = "We currently monitor Central, Eastern, Southern, and Northern zones.";
  if (userMsg.toLowerCase().includes("train")) reply = "You can view real-time train locations in the live train map below.";

  setTimeout(() => chatBody.innerHTML += `<div><b>Bot:</b> ${reply}</div>`, 500);
};

// üì± Responsive Navbar Toggle
const menuToggle = document.getElementById("menuToggle");
const navbar = document.getElementById("navbar");
menuToggle.onclick = () => navbar.classList.toggle("active");
</script>
</body>
</html>
